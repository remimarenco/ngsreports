<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>lab-reports</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Anne Pajon">
	<!-- Date: 2014-02-03 -->
	<!-- JQuery -->
	<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
    <!-- HighCharts -->
    <script src="http://code.highcharts.com/3.0.9/highcharts.js"></script>
    <script src="http://code.highcharts.com/3.0.9/modules/exporting.js"></script>
    <!-- DataTables -->
    <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.js"></script>

    <script type="text/javascript">    
    
    $(function () {
            $('#runbytype').highcharts({
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Usage of Sequencing Runs By Type'
                },
                xAxis: {
                    categories: ${categories}
                },
                yAxis: {
                    min: 0,
                    max: 100,
                    title: {
                        text: '% Usage'
                    },
                },
                legend: {
                    backgroundColor: '#FFFFFF',
                    reversed: true
                },
                plotOptions: {
                    series: {
                        stacking: 'normal'
                    }
                },
                series: [{
                    name: '$institute Institute',
                    data: $institute_data
                }, {
                    name: 'Others',
                    data: $others_data
                }]
            });
        });
        
        $(function () {
            $('#totalcapacity').highcharts({
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Institute Share of Total Sequencing Capacity'
                },
                tooltip: {
            	    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'sequencing share',
                    data: [
                        ['$institute Institute', $institute_capacity],
                        ['Others', $others_capacity],
                    ]
                }]
            });
        });

        $(function () {
            $('#hiseq').highcharts({
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Which groups of the $institute institute used the HiSeq?'
                },
                tooltip: {
            	    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'sequencing share',
                    data: [
                        $hiseq
                    ]
                }]
            });
        });

        $(function () {
            $('#miseq').highcharts({
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Which groups of the $institute institute used the MiSeq?'
                },
                tooltip: {
            	    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            format: '<b>{point.name}</b>: {point.percentage:.1f} %'
                        }
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'sequencing share',
                    data: [
                        $miseq
                    ]
                }]
            });
        });
        
        $(document).ready(function() {
            $('#billing').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>' );
            $('#example').dataTable( {
                aLengthMenu: [
                    [25, 50, 100, 200, -1],
                    [25, 50, 100, 200, "All"]
                ],
                iDisplayLength: -1,
                "aaData": [
                    $billing_table
                ],
                "aoColumns": [
                    { "sTitle": "Group" },
                    { "sTitle": "Researcher" },
                    { "sTitle": "SLX-ID" },
                    { "sTitle": "Run type" },
                    { "sTitle": "Flow-cell"},
                    { "sTitle": "Lane"},
                    { "sTitle": "Yield (M reads)"},
                    { "sTitle": "Billable"},
                    { "sTitle": "Billing month"},
                    { "sTitle": "Cost"}
                ]
            } );   
        } );
        

    </script>
    

</head>
<body>
    
    <h1>NGS Usage Report for $institute</h1>
    <h2>$date</h2>
    <div id="runbytype" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <div id="totalcapacity" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <div id="hiseq" style="min-width: 310px; height: 400px; margin: 0 auto;"></div>
    <div id="miseq" style="min-width: 310px; height: 400px; margin: 0 auto;"></div>
    <div id="billing" style="min-width: 310px; height: 400px; margin: 0 auto;"></div>
    
</body>
</html>
